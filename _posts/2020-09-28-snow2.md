---
layout: post
title: "John Snow: Cholera deaths aggregated by building"
date: 2020-09-28 12:22:00
image: /assets/img/
description:
main-class: 'demographics'
color:
tags:
- demographics
- points
- <500
- smaller areas
- rates
categories:
twitter_text:
introduction: 'John Snow: Cholera deaths aggregated by building'
---
<script>
  var map = L.map('map');
  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', { <!--this is the URL for the Nepal Geojson-->
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.light'
	}).addTo(map);

  map.scrollWheelZoom.disable();
  map.touchZoom.disable();
  var enableMapInteraction = function () {
      map.scrollWheelZoom.enable();
      map.touchZoom.enable();
  }
  $('#map').on('click touch', enableMapInteraction);
$('#map').on('mouseout', function(){ map.scrollWheelZoom.disable();});

  var smallIcon = L.icon({
         iconUrl: 'http://www.hckrecruitment.nic.in/images/blue.png',
         iconSize: [16, 16], // size of the icon
         });

   function onEachFeature(feature, layer) {
     //console.log(feature);
     var txt = "";
     for (var fname in feature.properties) {
       txt += fname;
       txt += " : ";
       txt += feature.properties[fname];
       txt += "<br/>";
     }
     layer.bindPopup(txt);
   }


  // load GeoJSON from an external file
  // load GeoJSON from an external file
  $.getJSON("../data/deaths_by_bldg.geojson",function(data){
    // add GeoJSON layer to the map once the file is loaded
    var geojsonMarkerOptions = {
    radius: 5,
    fillColor: "#0D0887",
    color: "#000",
    weight: 1,
    opacity: 1,
    fillOpacity: 0.8
};
var json = L.geoJson(data, {
      pointToLayer: function(feature, latlng) {
        
        return L.circleMarker(latlng, geojsonMarkerOptions);
      },
      onEachFeature: onEachFeature
    });
    json.addTo(map);
    map.fitBounds(json.getBounds());
  });

</script>

[DOWNLOAD DATA](../data/snow2.zip)

This dataset contains 250 points that correspond to buildings where cholera deaths were recorded near the Broad Street pump. These data were shared publicly by Wilson (2011). The variables include an ID for each building, its coordinates, and a death count. We added the following variables: an ID for the closest pump, as well as the distance to it and to the Broad Street pump (in meters), and, finally, a dummy variable that classifies observations in terms of whether the Broad Street pump was the closest pump to them.

The documentation is available at:

[DOWNLOAD DOCUMENTATION](../data/snow_documentation.pdf)

The Geoda script is available at:

[DOWNLOAD GEODA SCRIPT](../data/geoda_scripts_snow.pdf)


**Overview of data**

|	Variable	| 	Description 	|
|---|---|				
|	ID 	|	Unique ID 	|
|	x 	|	X coordinates (in meters) 	|
|	y 	|	Y coordinates (in meters) 	|
|	deaths 	|	Number of deaths per building 	|
|	pumpID 	|	ID of the nearest pump (see 'pumps' dataset) 	|
|	distpump 	|	Distance to the nearest pump (in meters - see 'pumps' dataset) 	|
|	distBSpump 	|	Distance to Broad St pump (in meters - see 'pumps' dataset) 	|
|	BSpump 	|	Create categories depending on whether the Broad Street pump is closest (1) or not (0) 	|


**References**

Wilson, R (2011). John Snow’s Cholera data in more formats. [http://blog.rtwilson.com/john-snows-cholera-data-in-more-formats/](http://blog.rtwilson.com/john-snows-cholera-data-in-more-formats/). Reprojected data can also be downloaded from Dani Arribas-Bel’s ‘reproducible john snow’ BitBucket repository at [https://bitbucket.org/darribas/reproducible_john_snow/src/master/](https://bitbucket.org/darribas/reproducible_john_snow/src/master/).


<br />

<br />

Prepared by ([Center for Spatial Data Science](https://spatial.uchicago.edu/)). Last updated September 28, 2020. Data provided "as is," no warranties.

